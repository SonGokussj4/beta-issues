{% extends "header.html" -%}

{% block body -%}

<h3>Unresolved Issues</h3>
<form method=post action="{{ url_for('tbl_del_row') }}">
<table id="issues" class="table table-hover">
  <thead>
    <tr>
      <th id="issue">Issue</th>
      <th id="descr">Description</th>
      {% if session.logged_in -%}
      <th id="edit">Edit</th>
      {% endif %}
    </tr>
  </thead>
  <tbody>
    {% for data in unresolved -%}
      {% set issue = data[1] -%}
      {% set description = data[2] -%}
      <tr>
        <td><spam style="font-family: monospace;">{{ issue }}</spam></td>
        <td>{{ description }}</td>
        {% if session.logged_in -%}
          <td>
            <a><button name="remove_issue" value="{{ issue }}" type="submit" class="btn btn-xs btn-danger" data-toggle="tooltip" data-placement="top" title="Remove issue: {{ issue }}">
              <span class="glyphicon glyphicon-remove"></span>
            </button></a>
            <a><button name="edit_issue" value="{{ issue }}" type="submit" class="btn btn-xs btn-success" data-toggle="tooltip" data-placement="top" title="Modify field">
              <span class="glyphicon glyphicon-edit"></span>
            </button></a>
           {#  <button type="button" data-id=" {{ data[0] }} " class="btn btn-default btn-xs editButton" data-toggle="modal" data-target="#issueStatus_editModal" data-row_data="{{ unresolved }}"><span class="glyphicon glyphicon-edit"></span></button> #}
            <span href="#issueStatus_editModal" class="open-issueStatus_editModal" data-toggle="modal" data-id=" {{ data[0] }} " data-issue="{{ issue }}">
              <a data-toggle="tooltip"  title="Add this item" class="btn btn-xs btn-primary">
                <span class="glyphicon glyphicon-edit" ></span>
              </a>
            </span>
          </td>
        {% endif -%}
      </tr>
    {% endfor -%}
  </tbody>
</table>
</form>

<h3>Resolved Issues</h3>
<table class="table table-hover">
  <thead>
    <tr>
      <th>Issue</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    {% for data in resolved -%}
      {% set issue = data[1] -%}
      {% set description = data[2] -%}
      <tr class="success">
        <td><spam style="font-family: monospace;">{{ issue }}</spam></td>
        <td>{{ description }}</td>
      </tr>
    {% endfor -%}
  </tbody>
</table>


<!-- Modal -->
<div class="modal fade" id="issueStatus_editModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        <span></span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  $(document).on("click", ".open-issueStatus_editModal", function () {
       // var issue = $(this).data('issue');
       var issue = $(this).attr('data-issue');
       $(".modal-body span").text( issue );
       // $(".modal-body #bookId").val( myBookId );
  });
</script>
{% endblock %}
